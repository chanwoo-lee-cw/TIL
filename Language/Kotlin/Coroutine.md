# Coroutine

## 코루틴이란?

> 함수처럼 호출되지만 중간에 실행을 멈추고(suspend), 나중에 중단했던 지점부터 다시 실행(resume)할 수 있는 '협력적인 루틴'

스레드(Thread)와 달리 경량이며, 비동기 작업을 처리할 때 코드를 순차적인 코드처럼 작성하게 만들어 가독성을 높이고, 스레드 오버헤드 없이 효율적인 동시성을 구현하는 데 사용된다.



## 코루틴과 쓰레드

프로세스 :  컴퓨터에서 실행되고 있는 프로그램을 의미한다.

쓰레드 : 프로세스보다 작은 개념으로 프로세스에 소속되어 여러 코드를 동시에 실행할 수 있도록 해준다.

즉, 한 프로세스가 여러 개의 쓰레드를 가지고 있으면 멀티 쓰레드 환경이라고 한다.

코루틴 : 쓰레드보다 작은 개념이다. 코루틴은 중단되었다가 재개될 수 있기 때문에, 앞부분은 1번 쓰레드에 배전되고, 뒷 부분은 2번 쓰레드에 배정될 수 있다.



### Context Switching

- 프로세스
  - 프로세스는 각각의 독립된 메모리 영역을 가지고 있기 때문에, Context Switching시 힙과 스택 영역이 모두 교체되어야 한다.
  - 가장 무거운 Context Switching
- 스레드
  - 프로세스내에 스택 영역을 갖고 있지만, 힙 영역을 공유하고 있기 때문에 실행이 변경되면 스택 영역만 교체된다.
  - 프로세스보단 가벼운 Context Switching
- 코루틴
  - 두 코루틴이 같은 쓰레드 위에서 실행될 수 있다.
  - 동일한 쓰레드에서 코루틴이 실행되면, 메모리를 공유하므로 Context Switching이 적다.
  - 여러 개의 코루틴이 한개의 스레드 위에서 번갈아 실행될 수 있기 때문에, 적은 쓰레드로도 동시성을 확보할 수 있다.





## 참고 문헌

- [https://kotlinlang.org/docs/coroutines-guide.html](https://kotlinlang.org/docs/coroutines-guide.html)
- [https://www.inflearn.com/course/2시간으로-끝내는-코루틴/dashboard](https://www.inflearn.com/course/2시간으로-끝내는-코루틴/dashboard)